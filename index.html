<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•Œë ˆë¥´ê¸° ì‹ë‹¨ í•„í„°</title>
    <style>
        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .checkbox-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .checkbox-item input[type="checkbox"] {
            transform: scale(1.2);
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
        }
        button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 30px;
        }
        .day-section {
            margin-bottom: 20px;
            border-left: 4px solid #dc3545;
            padding-left: 15px;
        }
        .day-title {
            color: #dc3545;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .menu-list {
            list-style-type: none;
            padding: 0;
        }
        .menu-item {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
        }
        .no-warnings {
            text-align: center;
            color: #28a745;
            font-size: 18px;
            padding: 20px;
            background-color: #d4edda;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ½ï¸ ì•Œë ˆë¥´ê¸° ì‹ë‹¨ í•„í„°</h1>

        <!-- ì•ŒëŸ¬ì§€ ëª©ë¡ í‘œ -->
        <table>
            <thead>
                <tr>
                    <th>ë²ˆí˜¸</th>
                    <th>ì•Œë ˆë¥´ê¸°</th>
                </tr>
            </thead>
            <tbody id="allergyTable">
                <!-- JavaScriptë¡œ ì±„ì›€ -->
            </tbody>
        </table>

        <!-- ì•ŒëŸ¬ì§€ ë‹¤ì¤‘ ì„ íƒ -->
        <h3>âš ï¸ í•´ë‹¹í•˜ëŠ” ì•ŒëŸ¬ì§€ë¥¼ ì²´í¬í•˜ì„¸ìš”:</h3>
        <div class="checkbox-container" id="checkboxContainer">
            <!-- JavaScriptë¡œ ì±„ì›€ -->
        </div>
        
        <button onclick="filterAllergies()">ğŸ” ì•Œë ˆë¥´ê¸° ì‹ë‹¨ í™•ì¸</button>

        <!-- ê²°ê³¼ í‘œì‹œ -->
        <div class="results" id="results"></div>
    </div>

    <script>
        // ì•Œë ˆë¥´ê¸° ë°ì´í„°
        const allergyDict = {
            1: "ë‚œë¥˜", 2: "ìš°ìœ ", 3: "ë©”ë°€", 4: "ë•…ì½©", 5: "ëŒ€ë‘", 6: "ë°€",
            7: "ê³ ë“±ì–´", 8: "ê²Œ", 9: "ìƒˆìš°", 10: "ë¼ì§€ê³ ê¸°", 11: "ë³µìˆ­ì•„", 12: "í† ë§ˆí† ",
            13: "ì•„í™©ì‚°ë¥˜", 14: "í˜¸ë‘", 15: "ë‹­ê³ ê¸°", 16: "ì‡ ê³ ê¸°", 17: "ì˜¤ì§•ì–´",
            18: "ì¡°ê°œë¥˜", 19: "ì£"
        };

        // ë©”ë‰´ ë°ì´í„°
        const menuData = {
            "5/26": [
                {"menu": "ë¯¸íŠ¸ì†ŒìŠ¤ìŠ¤íŒŒê²Œí‹°", "allergies": [1,2,5,6,10,12,13,15,16]},
                {"menu": "ì¶”ê°€ë°¥", "allergies": []},
                {"menu": "í•¨ë°•ìŠ¤í…Œì´í¬", "allergies": [1,2,6,10,12,13,15,16]},
                {"menu": "ë§¤ì‰¬ë“œí¬í…Œì´í† ", "allergies": [5,6]},
                {"menu": "ì˜¤ì´í”¼í´", "allergies": [13]},
                {"menu": "ê¹ë‘ê¸°", "allergies": [9,13]},
            ],
            "5/27": [
                {"menu": "í˜„ë¯¸ë°¥", "allergies": []},
                {"menu": "ë¶€ëŒ€ì°Œê°œ", "allergies": [5,6,10,13]},
                {"menu": "ìˆœì‚´ì•ˆë™ì°œë‹­", "allergies": [5,6,15]},
                {"menu": "ë¶€ì¶”ì „*ì´ˆê°„ì¥", "allergies": [5,6]},
                {"menu": "ë°±ê¹€ì¹˜", "allergies": [9,13]},
                {"menu": "ë°©ìš¸í† ë§ˆí† ", "allergies": [12]},
            ],
            "5/28": [
                {"menu": "ë°±ë¯¸ë°¥", "allergies": []},
                {"menu": "ë‚˜ê°€ì‚¬ë¼ì§¬ë½•", "allergies": [5,6,10,13,17,18]},
                {"menu": "í›„í›„ì¸ íƒ•ìˆ˜ìœ¡", "allergies": [5,6,10,12,13]},
                {"menu": "ë‘ë¶€ì¡°ë¦¼", "allergies": [5,6]},
                {"menu": "ê¼¬ë“¤ë‹¨ë¬´ì§€", "allergies": [13]},
                {"menu": "í¬ê¸°ê¹€ì¹˜", "allergies": [9,13]},
            ],
            "5/29": [
                {"menu": "ê¸°ì¥ë°¥", "allergies": []},
                {"menu": "ì–´ë¬µêµ­", "allergies": [5,6]},
                {"menu": "ëˆì‚¬íƒœì¥ì¡°ë¦¼", "allergies": [5,6,10]},
                {"menu": "ê³ êµ¬ë§ˆíŠ€ê¹€*ê°„ì¥", "allergies": [5,6]},
                {"menu": "ê¹ë‘ê¸°", "allergies": [9,13]},
                {"menu": "ì˜¤ë Œì§€", "allergies": []},
            ],
            "5/30": [
                {"menu": "ë‚˜ë¬¼ë¹„ë¹”ë°¥*ì–‘ë…ì¥", "allergies": [5,6]},
                {"menu": "ìˆœë‘ë¶€ì°Œê°œ", "allergies": [5,6,10]},
                {"menu": "ìˆœì‚´ì¹˜í‚¨", "allergies": [1,2,5,6,13,15]},
                {"menu": "ì½˜ìƒëŸ¬ë“œ", "allergies": [1,5,6,13,15]},
                {"menu": "í¬ê¸°ê¹€ì¹˜", "allergies": [9,13]},
                {"menu": "í•œêµ­ìš”êµ¬ë¥´íŠ¸", "allergies": [2]},
            ]
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            // ì•Œë ˆë¥´ê¸° í‘œ ìƒì„±
            const tableBody = document.getElementById('allergyTable');
            Object.entries(allergyDict).forEach(([num, name]) => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = num;
                row.insertCell(1).textContent = name;
            });

            // ì²´í¬ë°•ìŠ¤ ìƒì„±
            const checkboxContainer = document.getElementById('checkboxContainer');
            Object.entries(allergyDict).forEach(([num, name]) => {
                const div = document.createElement('div');
                div.className = 'checkbox-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.name = 'allergies';
                checkbox.value = num;
                checkbox.id = `allergy_${num}`;
                
                const label = document.createElement('label');
                label.htmlFor = `allergy_${num}`;
                label.textContent = `${num}. ${name}`;
                
                div.appendChild(checkbox);
                div.appendChild(label);
                checkboxContainer.appendChild(div);
            });
        };

        // ì•Œë ˆë¥´ê¸° í•„í„°ë§ í•¨ìˆ˜
        function filterAllergies() {
            const checkboxes = document.querySelectorAll('input[name="allergies"]:checked');
            const selectedAllergies = Array.from(checkboxes).map(cb => parseInt(cb.value));
            
            if (selectedAllergies.length === 0) {
                document.getElementById('results').innerHTML = 
                    '<div class="no-warnings">ì•Œë ˆë¥´ê¸°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>';
                return;
            }

            const warnings = checkAllergy(selectedAllergies);
            displayResults(warnings);
        }

        // ì•Œë ˆë¥´ê¸° ì²´í¬ í•¨ìˆ˜
        function checkAllergy(userAllergies) {
            const warnings = {};
            
            Object.entries(menuData).forEach(([day, menus]) => {
                const matched = [];
                menus.forEach(item => {
                    if (item.allergies.some(a => userAllergies.includes(a))) {
                        matched.push(item.menu);
                    }
                });
                if (matched.length > 0) {
                    warnings[day] = matched;
                }
            });
            
            return warnings;
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function displayResults(warnings) {
            const resultsDiv = document.getElementById('results');
            
            if (Object.keys(warnings).length === 0) {
                resultsDiv.innerHTML = 
                    '<div class="no-warnings">ğŸ‰ ì„ íƒí•˜ì‹  ì•Œë ˆë¥´ê¸°ì— í•´ë‹¹í•˜ëŠ” ìœ„í—˜ ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤!</div>';
                return;
            }

            let html = '<h2>âš ï¸ ì£¼ì˜í•´ì•¼ í•  ì‹ë‹¨:</h2>';
            
            Object.entries(warnings).forEach(([day, dishes]) => {
                html += `
                    <div class="day-section">
                        <div class="day-title">${day}</div>
                        <ul class="menu-list">
                            ${dishes.map(dish => `<li class="menu-item">${dish}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>